âœ… LAYER 1 â€” User Impact (The "Pain" Layer)ÄÃ¢y lÃ  chá»‰ sá»‘ sá»‘ng cÃ²n. Náº¿u Layer nÃ y Ä‘á», khÃ¡ch hÃ ng Ä‘ang rá»i bá» báº¡n.Chá»‰ sá»‘CÃ¡ch Ä‘o (Method)Ã nghÄ©a SREP95 LatencyÄo thá»i gian hoÃ n táº¥t TcpStream connect & Request-Response roundtrip.Loáº¡i bá» nhiá»…u cá»§a cÃ¡c request nhanh, táº­p trung vÃ o 5% ngÆ°á»i dÃ¹ng Ä‘ang "á»©c cháº¿" nháº¥t.Error Rate (%)Äáº¿m mÃ£ lá»—i HTTP (4xx, 5xx) dá»±a trÃªn phÃ¢n tÃ­ch log hoáº·c header náº¿u Agent can thiá»‡p sÃ¢u.Tá»‰ lá»‡ lá»—i tÄƒng Ä‘á»™t ngá»™t = Code lá»—i hoáº·c Logic sáº­p.Apdex ScoreCÃ´ng thá»©c: $(Satisfied + Tolerating/2) / Total$.Chá»‰ sá»‘ "hÃ i lÃ²ng" cá»§a user. GiÃºp Manager hiá»ƒu Ä‘Æ°á»£c há»‡ thá»‘ng Ä‘ang "tá»‡" Ä‘áº¿n má»©c nÃ o.Throughput (RPS)Requests per second.Náº¿u RPS giáº£m Ä‘á»™t ngá»™t cÃ¹ng Latency tÄƒng -> Há»‡ thá»‘ng Ä‘ang bá»‹ ngháº½n (Choke).
âœ… LAYER 2 â€” Application Internals (The "Harbor" Advantage)Táº­n dá»¥ng quyá»n Admin vÃ  Win32 API Ä‘á»ƒ soi vÃ o "lá»¥c phá»§ ngÅ© táº¡ng" cá»§a process.Chá»‰ sá»‘API Windows / RustÃ nghÄ©a SRERestart CountTrack PID change log trong Agent.Cá»±c ká»³ quan trá»ng. PhÃ¡t hiá»‡n tÃ¬nh tráº¡ng "Zombifying" (App cháº¿t rá»“i tá»± sá»‘ng láº¡i liÃªn tá»¥c).Handle CountGetProcessHandleCountPhÃ¡t hiá»‡n Resource Leak. Handle tÄƒng mÃ  khÃ´ng giáº£m = App sáº½ sáº­p sau vÃ i tiáº¿ng ná»¯a.Thread CountNtQueryInformationProcessPhÃ¡t hiá»‡n "Thread Exhaustion". Náº¿u thread pool ká»‹ch tráº§n, app sáº½ ngá»«ng pháº£n há»“i.Memory Growth Rate$\Delta$ Private Bytes / $\Delta$ Time.Tá»‘c Ä‘á»™ tÄƒng trÆ°á»Ÿng RAM. GiÃºp dá»± bÃ¡o chÃ­nh xÃ¡c bao lÃ¢u ná»¯a thÃ¬ mÃ¡y sáº½ bá»‹ OOM (Out of Memory).Context SwitchesPROCESS_CYCLE_TIME_INFORMATIONÄo má»©c Ä‘á»™ "tranh cháº¥p" CPU giá»¯a cÃ¡c thread. QuÃ¡ cao = App Ä‘ang xá»­ lÃ½ Ä‘a luá»“ng kÃ©m hiá»‡u quáº£.
âœ… LAYER 3 â€” Dependencies (The "External" Blame)GiÃºp Dev tráº£ lá»i cÃ¢u há»i: "Do code cá»§a mÃ¬nh hay do Database cá»§a tháº±ng khÃ¡c?"Chá»‰ sá»‘CÃ¡ch Ä‘o (Method)Ã nghÄ©a SREDB LatencyMonitor socket káº¿t ná»‘i Ä‘áº¿n port cá»§a SQL/Postgres/Redis.Náº¿u Latency app tÄƒng mÃ  Latency DB cÅ©ng tÄƒng -> Lá»—i táº¡i DB.Conn Pool HealthÄáº¿m sá»‘ lÆ°á»£ng Established Connections tá»›i cÃ¡c port dependency.Náº¿u Ä‘áº¡t ngÆ°á»¡ng giá»›i háº¡n (vÃ­ dá»¥ 100 conns) -> App Ä‘ang bá»‹ ngháº½n á»Ÿ táº§ng káº¿t ná»‘i.DNS Resolution TimeThá»i gian resolve cÃ¡c domain third-party API.Outage do DNS lÃ  loáº¡i outage "ngá»› ngáº©n" vÃ  khÃ³ tÃ¬m nháº¥t náº¿u khÃ´ng monitor.
âœ… LAYER 4 â€” Infrastructure Signals (The "Foundation")Lá»›p nÃ y chá»‰ cáº§n lÆ°á»›t qua Ä‘á»ƒ loáº¡i trá»« nguyÃªn nhÃ¢n váº­t lÃ½.Chá»‰ sá»‘CÃ¡ch Ä‘o (Method)Ã nghÄ©a SREDisk Latency (R/W)IO_COUNTERS & Ä‘o thá»i gian pháº£n há»“i.Quan trá»ng hÆ¡n Disk Usage. Disk 90% chÆ°a cháº¯c sáº­p, nhÆ°ng Disk Latency > 100ms lÃ  tháº£m há»a.Network ErrorsGetIfEntry2 (Windows Network Interface).PhÃ¡t hiá»‡n packet loss, rá»¥ng máº¡ng váº­t lÃ½.CPU Steal/Usageprocess.cpu_usage()Kiá»ƒm tra xem cÃ³ bá»‹ tháº±ng process hÃ ng xÃ³m tranh cháº¥p CPU khÃ´ng.ğŸ§  CHIáº¾N LÆ¯á»¢C Tá»I Æ¯U TTA (TIME-TO-ANSWER)Äá»ƒ Ä‘áº¡t Ä‘Æ°á»£c tiÃªu chÃ­ "NhÃ¬n lÃ  hiá»ƒu - Click tá»‘i thiá»ƒu", Dashboard cá»§a báº¡n cáº§n má»™t logic "Correlation" (TÆ°Æ¡ng quan):Thiáº¿t káº¿ "Incident-First" Dashboard:Top Header: Hiá»ƒn thá»‹ duy nháº¥t 3 sá»‘: P95 Latency | Error Rate | Uptime.Section 1 (The Why): Náº¿u P95 Latency tÄƒng, tá»± Ä‘á»™ng highlight cÃ¡c thÃ´ng sá»‘ phá»¥:VÃ­ dá»¥: "DB Latency â†‘ 200%", "Thread Count Maxed Out".Section 2 (The Where): Hiá»ƒn thá»‹ Path cá»§a process vÃ  cÃ¡c Port liÃªn quan.CÃ´ng thá»©c Hyper Mode thÃ´ng minh:Khi Agent phÃ¡t hiá»‡n Layer 1 cÃ³ váº¥n Ä‘á» (Latency > threshold), nÃ³ tá»± Ä‘á»™ng kÃ­ch hoáº¡t Hyper Mode á»Ÿ Layer 2 Ä‘á»ƒ thu tháº­p dá»¯ liá»‡u dÃ y Ä‘áº·c (1s/láº§n) trong vÃ²ng 5 phÃºt, sau Ä‘Ã³ tá»± quay vá» Normal Mode. Äiá»u nÃ y cung cáº¥p "há»™p Ä‘en" dá»¯ liá»‡u cá»±c ká»³ chi tiáº¿t ngay táº¡i thá»i Ä‘iá»ƒm xáº£y ra sá»± cá»‘.